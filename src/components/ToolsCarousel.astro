---
type ImageItem = {
  src: string;
  alt?: string;
  href?: string;
};

type Props = {
  images: ImageItem[];
  speed?: number;
  title?: string;
};

const {
  images = [],
  speed = 30,
  title = 'Tools',
} = Astro.props as Props;

---

<style>
  .marquee-mask {
    mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
    -webkit-mask-image: linear-gradient(to right, transparent, black 10%, black 90%, transparent);
  }

  .track {
    display: flex;
    align-items: center;
    overflow: hidden;
    padding-block: 1rem;
  }

  .marquee {
    display: flex;
    gap: 3rem;
    align-items: center;
    min-width: 200%;
    animation: scroll var(--speed, 30s) linear infinite;
  }

  .marquee:hover {
    animation-play-state: paused;
  }

  @keyframes scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
</style>

<div class="rounded-3xl border border-neutral-200 bg-white shadow-sm">
  <div class="px-4 pt-5">
    <h3 class="text-base md:text-lg font-semibold text-neutral-800">{title}</h3>
  </div>

  <div class="marquee-mask">
    <div class="track" style={`--speed:${speed}s`}>
      <div class="marquee">
        {images.concat(images).map((img) => (
            img.href ? (
                <a
                href={img.href}
                class="inline-flex items-center opacity-80 hover:opacity-100 transition"
                title={img.alt || ''}
                >
                <img
                    src={img.src}
                    alt={img.alt || ''}
                    title={img.alt || ''}
                    class="h-12 w-auto md:h-14 object-contain"
                    loading="lazy"
                />
                </a>
            ) : (
                <img
                src={img.src}
                alt={img.alt || ''}
                title={img.alt || ''}
                class="h-12 w-auto md:h-14 object-contain opacity-80 hover:opacity-100 transition"
                loading="lazy"
                />
            )
            ))}
      </div>
    </div>
  </div>
</div>
